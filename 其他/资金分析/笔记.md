## 概念笔记

### 交易卡号和交易账号的区别

性质不同

交易卡号：是银行发行的硬卡的编号代码，卡号的前6位数字代表发卡行标识代码，也叫BIN号，不同的BIN号代表了不同的银行卡组织和卡片级别。

交易账号：存款人在经办银行开立的办理资金收付结算的人民币活期存款账户。银行结算账户按存款人不同分为单位银行结算账户和个人银行结算账户。

号码位数不同

账号是19位的

卡号有19、16位的。



一个账号可以挂多张卡号，一个卡号也可以挂多张账号

一个卡号下可带一个人民币活期账户及**多个**外币活期账户，多个定期账户或定活账户。

持久性不同

账号不会变化，即使卡丢了，卡号没了，补卡后换上新的卡号，账号仍然存在。



### 账户信息表的特殊情况

```
交易卡号  交易账号
44-057800460001111 44-057800460001111
44-057801100301111 057801100301111
```

看规律应该是把`44-`的前缀剔除

44-开头的，一般是农业银行的存折号。[【来源】](https://zhidao.baidu.com/question/528024138547840965.html)

44是省份广东的代码，存折、存单、对公账户前两位账号就是省份代码。

## 数据规范化

### 收付标志

借贷标志 1 是 进 0 是出

```sql
update 收款卡交易明细 set 收付标志=(
  CASE 收付标志
    WHEN 'C' THEN '进'
    WHEN 'D' THEN '出'
    
    WHEN '入' THEN '进'
    WHEN '贷' THEN '进'
    WHEN '借' THEN '出'
    WHEN '1' THEN '进'
    WHEN '0' THEN '出'
    ELSE 收付标志
 END
)
```

### 列名标准化

不同银行调取的交易明细数据，列名不一样，要合并分析的话就得统一处理。

有时候列名经过标准化后，会出现两个一样的列名

比如：“客户名称”和“账户名称”，按照标准都应该转换为“账户开户名称”。

这就会发生重复列名现象。

