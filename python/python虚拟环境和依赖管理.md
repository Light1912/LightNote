## 创建虚拟环境

使用python自带的虚拟环境工具

```
python -m venv venv
```

linux激活虚拟环境

```
source ./venv/bin/activate	
```

windows激活虚拟环境

```
.\venv\Scripts\activate
```



退出虚拟环境

```
deactivate
```

## 依赖管理

https://zhuanlan.zhihu.com/p/486778776

pip-tools Github: https://github.com/jazzband/pip-tools

我之前一直觉得有requirements就够了

但其实依据我之前的经验来看，requirements会存在很多问题。

就比如最常见的问题是，项目只需要几个特定的依赖包即可，有些依赖包只是在写代码的时候用来测试的。

根据推荐发现的两个python依赖管理工具

- pip-tools 
- poetry

这里使用pip-tools试试看。



官方文档：

### 环境搭建

首先在任意位置创建一个空文件夹`demo`，然后打开命令行创建一个虚拟环境

```
python -m venv venv
```

linux激活虚拟环境

```
source ./venv/bin/activate
```

windows激活虚拟环境

```
.\venv\scripts\activate
```



安装`pip-tools`

```
pip install pip-tools
```

### 配置依赖文件

`pip-tools`文件是`requirements.in`文件

这个文件内容可以只填写直接依赖项

比如要创建一个flask项目时，通常要`pip install flask`

那这个`in`文件也只需要填写要按照的包名即可，比如文件中只有一行：

```
flask
```

### 安装依赖包

```
pip-compile ./requirements.in
```

这时候会自动下载相关的包并生成`requirements.txt`文件。

这里有个缺陷就是安装完成前不会弹出相关信息

查看`requirements.txt`文件

```
#
# This file is autogenerated by pip-compile with python 3.9
# To update, run:
#
#    pip-compile ./requirements.in
#
--index-url http://pypi.douban.com/simple/
--trusted-host pypi.douban.com

click==8.1.3
    # via flask
colorama==0.4.5
    # via click
flask==2.2.2
    # via -r ./requirements.in
importlib-metadata==5.0.0
    # via flask
itsdangerous==2.1.2
    # via flask
jinja2==3.1.2
    # via flask
markupsafe==2.1.1
    # via
    #   jinja2
    #   werkzeug
werkzeug==2.2.2
    # via flask
zipp==3.10.0
    # via importlib-metadata

```

### 添加新的包

修改`requirements.in`文件

```
flask
pandas
```

再次运行

```
pip-compile ./requirements.in
```



### 更新包

更新某个包

```
pip-compile --upgrade-package django
```

更新多个包

```
pip-compile --upgrade-package django --upgrade-package requests
```

更新时指定更新版本

```
pip-compile --upgrade-package django --upgrade-package requests==2.0.0
```



### 开发环境与生产环境切换

## 环境变量管理

```
pip install python-dotenv
```

环境变量的优先级

```
手动设置 > .env > .flaskenv
```

