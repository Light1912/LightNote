图片工具

## 删除没使用过的图片

删除markdown里没用到的图片

检索当前文件夹下所有图片的路径

检索md文件用到的所有图片的路径

例如一个文件夹目录如下

```
|-demo
  |-images
    |-1.png
    |-2.png
    |-3.jpg
  |-test.md
```

文件test.md的内容如下

```
# test.md
![](1.png)
```

文件`test.md`只用到了一张图片，即`1.png`，因此其他图片是是多余的，需要删除

### 使用

第一个参数是文件夹路径参数

- `-r` 表示是否递归，如果文件夹下有子目录，对每个子目录也执行相同的操作
- `-d` 图片文件夹名称（有的是img，有的是images）

```
python remove_not_use_img.py ./demo -r True -d img
```

使用后文件目录变为

```
|-demo
  |-images
    |-1.png
  |-test.md
```

## 图片名称规范化

图片的markdown编写格式是`![]()`。尽量在中括号内标明图片名称，这样后期可以使用代码自动重命名

如`记录.md`文件里用了一张图片

```
![背景图片1](./images/20211213023214.png)
```

经过自动格式化以后

```
![背景图片1](./images/记录_背景图片1.png)
```

> 1.若一张图片被多个文件引用怎么办？
>
> 多复制一份，然后重命名
>
> 2.如果中括号内无名称怎么办？
>
> 对这张图片不做任何操作

## 图片文件夹迁移

[move_img.py](move_img.py)



之前的markdown图片存储的位置五花八门，有的是在img文件夹下，有的在其他地方，现在为了更规范化，统一将图片文件存储在`images`文件夹下。

​	

1.找到markdown中用到的所有图片

2.判断图片位置是否合理，若不合理，移动到images文件夹下。

3.修改markdown对应的图片路径

技巧

移除代码块，有时候匹配到的图片可能出现在代码块里，这时候就需要将代码块给去掉

```python
text = re.sub(r'`.*?`', '',  text, flags=re.S)  # 去除代码块
```



使用

```
python move_img.py E:\Github\LightNote
```

