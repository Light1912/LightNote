# shell

与linux沟通的桥梁，图形化界面会降低linux系统的性能，所以厉害的人还是喜欢用命令行的形式和linux互动。**bash**是linux的解释器。

下面见识一下linux的常用命令，混个脸熟。以后常常见面。自然就熟悉了。

R 运行 S 终端 D 不可终端 Z 僵死 T 停止

## 常用系统工作命令

echo 显示字符串

date 查看日期

reboot 重启系统

poweroff 关闭系统

wget 下载网络文件

ps  查看系统中的进程状态

top 动态地监视进程活动与系统负载等信息

pidof 查询某个指定服务进程的pid值

kill 终止某个指定PID的服务进程

killall 终止某个指定名称的服务所对应的全部进程

## 系统状态检测命令

ifconfig 获取网卡配置与网络状态等信息

uname [-a] 查看系统内核与系统版本等信息

uptime 用于查看系统的负载信息，系统最近1、5、15分钟内的压力情况，尽量不要长期超过1，生产环境中不超过5

free [-h]显示当前系统中内存的使用量信息

who 用于查看当前登入主机的用户终端信息

last 可以查看本机的登陆记录，会被黑客篡改，并无很大用

history [-c] 显示历史执行过的命令，[-c] 表示清空记录，[!编码数字]可以重复执行某次命令

sosreport 收集系统配置及架构信息并输出诊断文档

## 工作目录切换命令

pwd 当前工作目录

cd 切换工作路径

- cd.. 进入上级目录
- cd ~切换到当前用户的家目录
- cd ~username 切换到其他用户的家目录
- cd /etc 进入etc
- cd - 回到上一次的目录

ls 显示目录中文件信息

- [-l] 查看文件属性，大小等详细信息
- [-a] 查看全部文件，包括隐藏文件
- [-d] 查看目录的权限与属性信息

## 文本文件编辑命令

cat 查看（内容较少的）纯文本文件 [-n] 显示行号

more 查看（内容较多的）纯文本文件

head 查看纯文本文件的前N行 如：` head -n 20 readme.md`

tail 看后N行

tr 替换文本文件的字符。 `cat readme.md | tr [a-z] [A-Z]`

wc 统计指定文本的行数，字数，字节数。

- [-l] 只显示行数
- [-w] 只显示单词数
- [-c] 只显示字节数

stat 查看文件的具体存储信息和时间等信息

cut 按“列”提取文本字符 [-f]需要看到的列数 [-d] 间隔符号 `cut -d: -f1 /etc/passwd`

diff 比较多个文本文件的差异

- [--brief]判断文件是否相同
- [-c] 描述文件不同之处

## 文件目录管理命令

touch 创建空白文件或设置文件的时间

- [-a] 修改读取时间 atime
- [-m] 修改修改时间 mtime
- [-d] 同时修改

mkdir 新建文件夹

- [-p] 嵌套新建文件夹 `mkdir -p library/book`

cp 复制文件或目录

- [-p] 保留原始文件的属性
- [-d] 若对象为“链接文件”，则保留该“链接文件”的属性
- [-r] 递归持续复制 （用于目录）
- [-i] 若目标文件存在则询问是否覆盖
- [-a] 相当于-pdr

mv 剪切文件或重命名

rm 用于删除文件或目录

- [-f] 强制删除

dd 按照指定大小和个数的数据块来复制文件或转换文件，还可以压制出光盘镜像文件

- [if] 输入文件的名称
- [of] 输出文件的名称
- [bs] 设置每个“块”的大小
- [count] 设置要复制“块”的个数

file 用于查看文件类型

## 打包压缩与搜索命令

tar 对文件进行打包压缩或解压

- [-c] 创建压缩文件
- [-x] 解压
- [-t] 查看压缩包内有哪些文件
- [-z] 用Gzip压缩或解压
- [-j] 用bzip2压缩或解压
- [-v] 显示压缩或解压的过程
- [-f] **目标的文件名** 必须要放到参数最后一位
- [-p] 保留原始的权限与属性
- [-P] 使用绝对路径来压缩
- [-C] 指定解压到的目录
- 压缩例子：`tar -csvf 压缩包名称.tar.gz 要打包的目录`
- 解压例子：`tar -xsvf 压缩包名.tar.gz -C 解压到的目录`

grep 在文本中执行关键词搜索并显示匹配的结果

- [-b] 将可执行文件（binary）当做文本文件（text）来搜索
- [-c] 仅显示找到的行数
- [-i] 忽略大小写
- [-n] **显示行号**
- [-v] **反向选择**
- `grep light readme.md`

find [查找路径] 按照指定条件来查找文件

- [-name] 匹配名称
- [-perm] 匹配权限
- [-user] 匹配所有者
- [-group] 匹配所有组
- [-mtime -n +n] 匹配修改内容的时间 -n 指n天以内， +n指n天以前
- [-atime -n +n] 访问时间
- [-ctime -n +n] 修改文件权限的时间
- [-nouser] 匹配无所有者
- [-nogroup] 匹配无所有组
- [-newer f1 !f2] 匹配比文件f1新但比f2旧的文件
- [--type b/d/c/p/l/f] 匹配文件类型，字母参数依次表示块设备、目录、字符设备、管道、链接文件、文本文件
- [-size] 匹配文件大小 +50 表示大于50kb，-50表示小于50kb
- [-prune] 忽略某个目录
- [-exec ...... {} \;] 后面可跟用于进一步处理搜索结果的命令



