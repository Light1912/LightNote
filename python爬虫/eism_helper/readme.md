```json
weaponQuality: 0
battleRoundId: 39338
side: defender
value: undefined
ip: 112.2.251.8
serverName: 39
citizenId: 24502
myCitizenship: 28
```



# 同时盯多个战场

使用`async`异步操作，战斗结束就关闭窗口。



# 战斗管理

- 每次新建一个battle对象时，同时绑定一个window handle
- 战斗结束时关闭窗口，其他任何时候都不要关闭窗口
- 飞行时新建一个窗口，飞行结束后关闭窗口

### 飞行

输入

- driver对象
- 目的地id
- 要使用的机票等级

处理：

- 打开一个新标签页，url为目的地的地区页面

- ~~检查当前所在地的地区id，如果和目的地一致则完成飞行~~

  检查当前所在地的**国家**，如果和目的地**国家**一致则完成飞行

  记录当前的窗口handle:`driver.current_window_handle`

- 选择机票等级

- 检查体力情况，如果体力不足则补充

- 点击飞行

- 关闭当前页面

- driver切换回之前的窗口



# 自动抢章思路

暂时只监控 起义战和进攻战

每隔1个小时，查看所有战场

过滤以下战场：

- 进攻战、起义战以外的战场
- 两边都有人输出过的战场
- 不到60秒就要结束的战场

满足条件的战场加入监控列表

监控列表按国家分类，批量操作



